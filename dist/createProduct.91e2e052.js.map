{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,sBAmBAE,eAAeC,EAAaC,EAASC,EAAM,IAQnC,OANmBA,EAAIC,KACvBJ,MAAOK,IAEH,MAAMC,QAXlBN,eAAoCE,EAASG,GACzC,MAAME,EAAaC,EAAAC,IAAIP,EAAS,kBAAkBG,EAAMK,QACxD,aAAaF,EAAAG,YAAYJ,EAAYF,GASAO,CAAqBV,EAASG,GAC3D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAASI,EAAeG,IAAIK,cDtBlE,MAAMC,EAAOC,SAASC,eAAe,SAI/BC,GADYH,EAAKZ,IACNY,EAAKL,MAChBS,EAAkBJ,EAAKK,YACvBC,EAAYN,EAAKO,MASjBC,GARYR,EAAKS,MACFT,EAAKU,SACRV,EAAKW,OACLX,EAAKY,OACJZ,EAAKa,IAICZ,SAASa,cAAc,qBAC3CC,EAA0Bd,SAASa,cAAc,2BAEtDd,EAAKgB,iBAAiB,UAAU/B,MAAOgC,IAGnC,GAFAA,EAAGC,iBAEoB,KAAnBf,EAASgB,OAA0C,KAA1Bf,EAAgBe,OAAoC,KAApBb,EAAUa,MACnEC,MAAM,yDACH,CAGH,MAAMhC,EAAMY,EAAKZ,IAAIiC,MACf1B,EAAOK,EAAKL,KAAKwB,MACjBd,EAAcL,EAAKK,YAAYc,MAC/BZ,EAAQP,EAAKO,MAAMY,MACnBV,EAAQT,EAAKS,MAAMU,MACnBT,EAAWV,EAAKU,SAASS,MACzBR,EAASX,EAAKW,OAAOQ,MACrBP,EAASZ,EAAKY,OAAOO,MAE3B,IAAIG,EAAU,GAEd,GAAIlC,EAAImC,OAAQ,CAEZ,MAAMC,QAAuBtC,EAAaJ,EAAAK,QAAS,IAAIC,IACvDkC,QAAgBG,QAAQC,IAAIF,GAIhC,MAAMG,EAAc,CAChBvC,IAAKkC,OACL3B,cACAU,QACAE,QACAE,WACAC,SACAC,SACAC,SCpDZ3B,eAA0B2C,EAAIC,GAE1B,UACU7C,EAAA8C,OAAO9C,EAAA+C,WAAWH,EAAI,YAAaC,GACzCG,QAAQC,IAAI,+BACd,MAAOC,GACLF,QAAQC,IAAIC,IDiDNC,CAAWrD,EAAA8C,GAAID,GACrBP,MAAM,qCAQdZ,EAAiBQ,iBAAiB,UAAU,KAExC,MAAMoB,EAAW5B,EAAiBa,MAElC,IAAKe,IAAaA,EAASb,OAEzB,YADAR,EAAwBsB,IAAM,IAIhC,MAAMC,EAAgBF,EAAS,GAEzBG,EAAYC,IAAIC,gBAAgBH,GAEtCvB,EAAwBsB,IAAME","sources":["src/createProduct.js","src/functions/addProducts.js"],"sourcesContent":["import { db, storage } from '../src/functions/app';\nimport { addProduct, uploadImages } from \"../src/functions/addProducts\";\n\nconst form = document.getElementById(\"forms\");\n\n\nconst itemImage = form.img;\nconst itemName = form.name;\nconst itemDescription = form.description;\nconst itemPrice = form.price;\nconst itemStock = form.stock;\nconst itemCategory = form.category;\nconst itemVegan = form.vegano;\nconst itemSugar = form.azucar;\nconst itemSubmit = form.btn;\n\n\n\nconst $form__item__img = document.querySelector(\"#form__item__img\"),\n     $imagenPrevisualizacion = document.querySelector(\"#imagenPrevisualizacion\");\n\nform.addEventListener(\"submit\", async (ev) => {\n    ev.preventDefault();\n\n    if (itemName.value === '' || itemDescription.value === '' || itemPrice.value === '') {\n        alert(\"Hay campos sin llenar. Por favor llena los campos\");\n    } else {\n\n\n        const img = form.img.files;\n        const name = form.name.value;\n        const description = form.description.value;\n        const price = form.price.value;\n        const stock = form.stock.value;\n        const category = form.category.value;\n        const vegano = form.vegano.value;\n        const azucar = form.azucar.value;\n\n        let gallery = [];\n\n        if (img.length) {\n            //upload images to firebase\n            const uploadedImages = await uploadImages(storage, [...img]);\n            gallery = await Promise.all(uploadedImages)\n\n        }\n\n        const newProducts = {\n            img: gallery,\n            name,\n            description,\n            price,\n            stock,\n            category,\n            vegano,\n            azucar\n        }\n\n        await addProduct(db, newProducts);\n        alert(\"Producto añadido éxitosamente\");\n\n    }\n\n\n\n});\n\n$form__item__img.addEventListener(\"change\", () => {\n    // Los archivos seleccionados, pueden ser muchos o uno\n    const archivos = $form__item__img.files;\n    // Si no hay archivos salimos de la función y quitamos la imagen\n    if (!archivos || !archivos.length) {\n      $imagenPrevisualizacion.src = \"\";\n      return;\n    }\n    // Ahora tomamos el primer archivo, el cual vamos a previsualizar\n    const primerArchivo = archivos[0];\n    // Lo convertimos a un objeto de tipo objectURL\n    const objectURL = URL.createObjectURL(primerArchivo);\n    // Y a la fuente de la imagen le ponemos el objectURL\n    $imagenPrevisualizacion.src = objectURL;\n  });\n","import { addDoc, collection } from \"firebase/firestore\";\nimport { ref, uploadBytes, getDownloadURL } from \"firebase/storage\"\n\nasync function addProduct(db, product) {\n\n    try {\n        await addDoc(collection(db, \"products\"), product);\n        console.log(\"product added successfully!\");\n    } catch (e) {\n        console.log(e);\n    }\n\n}\nasync function imageUploadReference(storage, image) {\n    const storageRef = ref(storage, `prducts/images/${image.name}`);\n    return await uploadBytes(storageRef, image);\n}\n\n\nasync function uploadImages(storage, img = []) {\n\n    const uploadedImages = img.map(\n        async (image)=> {\n            //console.log(image)\n            const imageReference = await imageUploadReference(storage, image);\n            return getDownloadURL(ref(storage, imageReference.ref.fullPath));\n        });\n        return uploadedImages;\n    \n\n\n}\n\nexport { addProduct, uploadImages }\n\n\n"],"names":["$4Bu0d","parcelRequire","$etBjH","async","$331792ce22f80d45$export$633f5b6169e2b910","storage","img","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$331792ce22f80d45$var$imageUploadReference","getDownloadURL","fullPath","$456a6b571f55f25c$var$form","document","getElementById","$456a6b571f55f25c$var$itemName","$456a6b571f55f25c$var$itemDescription","description","$456a6b571f55f25c$var$itemPrice","price","$456a6b571f55f25c$var$$form__item__img","stock","category","vegano","azucar","btn","querySelector","$456a6b571f55f25c$var$$imagenPrevisualizacion","addEventListener","ev","preventDefault","value","alert","files","gallery","length","uploadedImages","Promise","all","newProducts","db","product","addDoc","collection","console","log","e","$331792ce22f80d45$export$7caf006d7b64ee15","archivos","src","primerArchivo","objectURL","URL","createObjectURL"],"version":3,"file":"createProduct.91e2e052.js.map"}