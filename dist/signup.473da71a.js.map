{"mappings":"oeACA,IAAAA,EAAAC,EAAA,mCAMA,MAAMC,EAAiBC,SAASC,eAAe,cAE/CF,EAAeG,iBAAiB,UAAUC,MAAOC,IAC7CA,EAAEC,iBAEF,MAKMC,EAAW,CAjBrBC,KAYiBR,EAAeQ,KAAKC,MAZrCC,SAaqBV,EAAeW,SAASF,MAb7CG,MAckBZ,EAAeY,MAAMH,MAdvCI,SAeqBb,EAAea,SAASJ,MAf7CK,MAgBkBd,EAAec,MAAML,OAG7BM,QAKVX,eAA0BQ,EAAOC,GAC7B,IACI,MA1BRG,KA0BgBA,SAAeC,EAAAC,+BAA+BpB,EAAAqB,KAAMP,EAAOC,GAEnE,OAAOG,EAET,MAAOX,GAEU,uBAAXA,EAAEe,MACFC,MAAM,kDAGK,8BAAXhB,EAAEe,MACFC,MAAM,uCAlBQC,CAAWf,EAASK,MAAOL,EAASM,gBAuB9DT,eAAiCmB,EAAQhB,EAAW,IAChD,UACUiB,EAAAC,OAAOD,EAAAE,IAAI5B,EAAA6B,GAAI,QAASJ,GAAShB,GACvCqB,OAAOC,SAASC,KAAO,eACzB,MAAOzB,GACL0B,QAAQC,IAAI3B,IA3BV4B,CAAkBlB,EAAQmB,IAAK3B","sources":["src/signup.js"],"sourcesContent":["\r\nimport {auth,db} from \"./functions/app\";\r\nimport {createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { doc,setDoc } from \"firebase/firestore\";\r\n\r\n\r\n// Initialize Firebase\r\nconst createUserForm = document.getElementById(\"singUpForm\");\r\n\r\ncreateUserForm.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const name = createUserForm.name.value;\r\n    const lastName = createUserForm.lastname.value;\r\n    const email = createUserForm.email.value;\r\n    const password = createUserForm.password.value;\r\n    const admin = createUserForm.admin.value;\r\n    const userInfo = {name,lastName,email,password,admin};\r\n\r\n    const newUser = await createUser(userInfo.email, userInfo.password);\r\n    await addUserToDatabase(newUser.uid, userInfo);\r\n\r\n});\r\n\r\nasync function createUser(email, password) {\r\n    try {\r\n        const { user } = await createUserWithEmailAndPassword(auth, email, password);\r\n        //alert(`Bienvenido, usuario ${user.email}`);\r\n        return user;\r\n        \r\n    } catch (e) {\r\n\r\n        if (e.code === \"auth/weak-password\") {\r\n            alert(\"Tu contrase√±a debe tener al menos 6 caracteres\");\r\n        }\r\n\r\n        if (e.code === \"auth/email-already-in-use\") {\r\n            alert(\"Este correo ya se encuentra en uso\");\r\n        }\r\n    }\r\n}\r\n\r\nasync function addUserToDatabase(userId, userInfo = {}) {\r\n    try {\r\n        await setDoc(doc(db, \"users\", userId), userInfo);\r\n        window.location.href = \"./login.html\";\r\n    } catch (e) {\r\n        console.log(e);\r\n    }\r\n}\r\n"],"names":["$4Bu0d","parcelRequire","$a2fd26ac91ec413e$var$createUserForm","document","getElementById","addEventListener","async","e","preventDefault","userInfo","name","value","lastName","lastname","email","password","admin","newUser","user","$1tHc5","createUserWithEmailAndPassword","auth","code","alert","$a2fd26ac91ec413e$var$createUser","userId","$etBjH","setDoc","doc","db","window","location","href","console","log","$a2fd26ac91ec413e$var$addUserToDatabase","uid"],"version":3,"file":"signup.473da71a.js.map"}